"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{4622:function(e,t,r){let n,a;r.r(t),r.d(t,{default:function(){return E}});var o=r(3827),u=r(4090),i=r(678);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var l=r(1791);l.ZAu;let s=u.createContext(null),d=new l.yGw,f=new l.Pa4,m=u.forwardRef((e,t)=>{let{children:r,range:o,limit:m=1e3,...g}=e,p=u.useRef(null);u.useImperativeHandle(t,()=>p.current,[]);let[h,y]=u.useState([]),[[b,x,w]]=u.useState(()=>[new Float32Array(3*m),Float32Array.from({length:3*m},()=>1),Float32Array.from({length:m},()=>1)]);u.useEffect(()=>{p.current.geometry.attributes.position.needsUpdate=!0}),(0,i.F)(()=>{for(p.current.updateMatrix(),p.current.updateMatrixWorld(),d.copy(p.current.matrixWorld).invert(),p.current.geometry.drawRange.count=Math.min(m,void 0!==o?o:m,h.length),n=0;n<h.length;n++)(a=h[n].current).getWorldPosition(f).applyMatrix4(d),f.toArray(b,3*n),p.current.geometry.attributes.position.needsUpdate=!0,a.matrixWorldNeedsUpdate=!0,a.color.toArray(x,3*n),p.current.geometry.attributes.color.needsUpdate=!0,w.set([a.size],n),p.current.geometry.attributes.size.needsUpdate=!0});let E=u.useMemo(()=>({getParent:()=>p,subscribe:e=>(y(t=>[...t,e]),()=>y(t=>t.filter(t=>t.current!==e.current)))}),[]);return u.createElement("points",c({userData:{instances:h},matrixAutoUpdate:!1,ref:p,raycast:()=>null},g),u.createElement("bufferGeometry",null,u.createElement("bufferAttribute",{attach:"attributes-position",count:b.length/3,array:b,itemSize:3,usage:l.dj0}),u.createElement("bufferAttribute",{attach:"attributes-color",count:x.length/3,array:x,itemSize:3,usage:l.dj0}),u.createElement("bufferAttribute",{attach:"attributes-size",count:w.length,array:w,itemSize:1,usage:l.dj0})),u.createElement(s.Provider,{value:E},r))}),g=u.forwardRef((e,t)=>{let{children:r,positions:n,colors:a,sizes:o,stride:s=3,...d}=e,f=u.useRef(null);return u.useImperativeHandle(t,()=>f.current,[]),(0,i.F)(()=>{let e=f.current.geometry.attributes;e.position.needsUpdate=!0,a&&(e.color.needsUpdate=!0),o&&(e.size.needsUpdate=!0)}),u.createElement("points",c({ref:f},d),u.createElement("bufferGeometry",null,u.createElement("bufferAttribute",{attach:"attributes-position",count:n.length/s,array:n,itemSize:s,usage:l.dj0}),a&&u.createElement("bufferAttribute",{attach:"attributes-color",count:a.length/s,array:a,itemSize:3,usage:l.dj0}),o&&u.createElement("bufferAttribute",{attach:"attributes-size",count:o.length/s,array:o,itemSize:1,usage:l.dj0})),r)}),p=u.forwardRef((e,t)=>e.positions instanceof Float32Array?u.createElement(g,c({},e,{ref:t})):u.createElement(m,c({},e,{ref:t}))),h=parseInt(l.UZH.replace(/\D+/g,"")),y=h>=154?"opaque_fragment":"output_fragment";class b extends l.UY4{constructor(e){super(e),this.onBeforeCompile=(e,t)=>{let{isWebGL2:r}=t.capabilities;e.fragmentShader=e.fragmentShader.replace("#include <".concat(y,">"),"\n        ".concat(r?"#include <".concat(y,">"):"#extension GL_OES_standard_derivatives : enable\n#include <".concat(y,">"),"\n      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n      float r = dot(cxy, cxy);\n      float delta = fwidth(r);     \n      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );\n      #include <tonemapping_fragment>\n      #include <").concat(h>=154?"colorspace_fragment":"encodings_fragment",">\n      "))}}}let x=u.forwardRef((e,t)=>{let[r]=u.useState(()=>new b(null));return u.createElement("primitive",c({},e,{object:r,ref:t,attach:"material"}))});function w(){let e=(0,u.useRef)(null),{viewport:t}=(0,i.D)(),r=new Float32Array(9e3);for(let e=0;e<9e3;e+=3)r[e]=(Math.random()-.5)*t.width*2,r[e+1]=(Math.random()-.5)*t.height*2,r[e+2]=(Math.random()-.5)*15;let n=(0,u.useRef)({x:0,y:0}),a=(0,u.useRef)({x:0,y:0});return(0,u.useEffect)(()=>{let e=e=>{n.current.x=e.clientX/window.innerWidth*2-1,n.current.y=-(e.clientY/window.innerHeight*2)+1};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),(0,i.F)(t=>{e.current&&(a.current.x+=(.5*n.current.x-a.current.x)*.02,a.current.y+=(.5*n.current.y-a.current.y)*.02,e.current.rotation.x=l.M8C.lerp(e.current.rotation.x,a.current.y*Math.PI*.05,.01),e.current.rotation.y=l.M8C.lerp(e.current.rotation.y,a.current.x*Math.PI*.05,.01),e.current.position.y=.1*Math.sin(.15*t.clock.getElapsedTime()))}),(0,o.jsx)("group",{ref:e,children:(0,o.jsx)(p,{positions:r,children:(0,o.jsx)(x,{transparent:!0,color:"#88ccff",size:.025,sizeAttenuation:!0,depthWrite:!1,blending:l.WMw})})})}function E(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("color",{attach:"background",args:["#000000"]}),(0,o.jsx)(w,{})]})}}}]);